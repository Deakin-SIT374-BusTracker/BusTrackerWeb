@*View Layout and Header*@
@{
    Layout = "~/Views/Shared/_Layout.cshtml";

    // Link Twitter Typeahead CSS.
}



@* View HTML Body*@
@* Bus Hop Search - Logo *@
<div style="margin-top:1.5em">
    <img src="~/Content/Images/bushop-logo.png" class="img-responsive" style="margin:0 auto; width:12em" />
</div>

@* Bus Hop Search - Destination TypeAhead and Search Button *@
<div>
    <div class="search-title">Where are you travelling to?</div>
    <form>
<<<<<<< HEAD
        <div class="form-group">
            <input id="searchInput" type="text" class="form-control search-destination" placeholder="Find routes near me">
        </div>
        <div style="text-align: center">
            @*<div class="search-title">
                ...and when?
            </div>
            <input type="radio" name="time" value="now" checked> Now
                <input type="radio" name="time" value="laterToday"> Later today 
            <input type="radio" name="time" value="showAll"> Show me all times
            <br /><br />*@
            @*the button doesn't work when you press enter*@
            <button id="searchButton" type="button" class="btn btn-primary">Search</button>
=======
        <div style="text-align: center">
            <div id="search-hints">
                <input id="search-input" type="text" class="typeahead form-control search-destination" placeholder="Destination">
            </div>

            <button id="searchButton" type="button" class="search-button btn btn-primary">Search</button>
>>>>>>> 9d0dabcf4eac51b8eafdf5e395acaa57a1d0d9a0
        </div>
    </form>
</div>

@* Bus Hop Search - Results Partial View Placeholder *@
<div class="search-table" id="searchResults"></div>



@* View Javascripts (Called after HTML Body)*@
@section scripts {
    @* Include Twitter Typeahead Javascript Package *@
    <script type="text/javascript" src="~/Scripts/typeahead.js"></script>

    <script>
        /*
        Function: document.Ready()
        Jquery function called after document has been rendered.
        */
        $(function () {
            var countries = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.whitespace,
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                prefetch: {
                    url: '/Journey/SearchHints?q=%QUERY&nocache=' + (new Date()).getTime(),
                    wildcard: '%QUERY'
                }
            });

            $('#search-hints .typeahead').typeahead(null, {
                name: 'hints',
                source: countries
            });
        });
    </script>

    <script>
        /*
        Function: searchButton.click()
        Use Jquery to get the search results partial view.
        */
        $('#searchButton').click(function () {
            $.get("/Journey/SearchRoutes", { destination: $("#search-input").val() }, function (response) {
                $("#searchResults").html(response);
            });
        });
    </script>
}
